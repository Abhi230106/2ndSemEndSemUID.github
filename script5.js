let conjuring = {
    poster: "./conjuring.jpg",
    genre: "Horror |  Mystery | Thriller",
    director: "James Wan",
    starring: "Patrick Wilson <br> Vera Farmiga",
    rating: "7.5/10",
    about: "Paranormal investigators Ed and Lorraine Warren work to help a family terrorized by a dark presence in their farmhouse.",
    synopsis: "In 1971, Carolyn and Roger Perron move into a dilapidated, old farmhouse in Harrisville, Rhode Island with their five daughters. During the first day, the family moves in smoothly except for the dog, who refuses to come into the house. That night, the children play a game called hide-and-clap; while playing, one of the daughters finds the boarded up entrance to a cellar. After Roger inspects the basement with a match, the family goes to bed. Carolyn expresses concern because the dog is barking outside, and one of the daughters feels someone pulling at her feet.<br><br>" +
        "In the morning, Carolyn wakes up with a mysterious bruise and their dog Sadie, is found dead. Over the next couple of days, various paranormal activities occur; doors open and close seemingly by themselves and Carolyn hears clapping when nobody is there. At night, their young daughter Cindy sleepwalks into the eldest daughter's bedroom, where she bangs her head repeatedly against an old wardrobe. The activity culminates in the eldest daughter being attacked by a spirit that looks like an elderly woman. Carolyn seeks the help of Ed and Lorraine Warren, noted paranormal investigators, to validate their concerns. Lorraine senses that a particular malevolent spirit has latched on to the family. They conduct an initial investigation, and conclude they should get involved, explaining to the Perron family that the house may require an exorcism. However, this cannot be done without further evidence and authorization from the Catholic Church.<br><br>" +
        "During the process of researching the house's history, Ed and Lorraine find out that the house belonged to an accused witch, Bathsheba. When Bathsheba's husband caught her sacrificing their week-old infant, she climbed to the top of a tree on the property, cursed all those who would take her land, and proclaimed her love for Satan before committing suicide. This is followed by reports found of numerous murders and suicides in houses that have since been built upon the property.<br><br>" +
        "Ed and Lorraine return to the house with a police officer, and another paranormal investigator, Drew. They set up thermal cameras, and alarm systems throughout the house in an attempt to prove the spirit of Bathsheba is inhabiting the house and receive authorization from the Catholic Church. For the first night, nothing happens, and the clocks do not stop at 3:07AM. The next day, they all eat breakfast together and Roger Perron thanks Ed Warren for doing what they can to help. Ed explains that with every exorcism they do, a little piece of his wife Lorraine is taken, but he promises they will do what they can to help them.<br><br>" +
        "During another night of investigation, nothing seems to happen until nightfall, when Cindy begins to sleepwalk again. While walking upstairs, thermal cameras observe a temperature drop around her as she enters into the wardrobe, whereupon the door slams shut behind her. The others force their way into the room and find a secret passage behind the wardrobe. After Cindy is taken out, Lorraine enters the wardrobe and falls through the floor boards down into the cellar. There, she sees the spirits of people whom Bathsheba has possessed, and realizes Bathsheba's purpose: to possess mothers and use them to kill their children.<br><br>" +
        "After Lorraine escapes the cellar, she and Ed take their evidence to Father Gordan to organize an exorcism while the Perron family takes refuge at a hotel. Their relief is interrupted when Carolyn suddenly drives back to the house with two of the daughters. Ed and Lorraine rush to the house, where they find Roger and the police officer struggling with Carolyn as she tries to stab one of her daughters with a pair of scissors. Ed suggests they call the priest, but Lorraine reminds him that the priest is too far away, forcing Ed to perform the exorcism himself. While the others hold the tormented Carolyn down, Ed continues the exorcism.<br><br>" +
        "Carolyn seemingly stops struggling, and for a brief moment it seems the excorism was successful. Suddenly, her chairs flips over end and she is held upside down. Ed yells for the demon to put her down, and after a few tense moments, she is released onto the ground. Ed rushes over to Carolyn, and tells the demon to leave her body. Carolyn slowly turns to Ed and says, \"She's already gone.\".<br><br>" +
        "Meanwhile, Drew finds April hiding under the floorboards in the kitchen. He yells down the cellar that he found her, and this alerts the Demon inside Carolyn and she dashes up cellar stairs to find April, in order to complete the sacrifice. Ed and Lorraine Warren, along with Roger, rush up the stairs after her in order to stop her from going through with it. The possessed Carolyn chases after April thru a tunnel underneath the floorboards. Carolyn grabs a hold of April, but at the same time, Lorraine reaches down through the floor and grabs Carolyns head. She tells Carolyn to remember how much her family means to her, and to remember what she told her about how special they were to her and that they mean the world to her, and what she would leave behind if she went through with it. This seems to get through to Carolyn, as her face relaxes, and her breathing returns to normal. The demonic presence in her eyes seems to fade, and she puts April down.<br><br>" +
        "The scene changes to Carolyn being helped out of the front door, to a now sunny morning. As she crosses from threshold of the door into the sunlight, the bruises on her skin fade away and she returns to her normal self. Roger and Carolyn rejoice with their family in the front yard, embracing one another, knowing that it's finally over.<br><br>" +
        "After they ward off the demon at the Perron household, the Warrens return to their home. The scene cuts to Ed Warren entering his room of possessed objects and artifacts. He places the old music box from the house on an empty space on a shelf. Lorraine enters the room, and they leave together. After a few seconds, the music box starts to play on its own, and the camera slowly pans back to the music box. The camera zooms in on the mirror of the open music box, and the music slowly comes to a stop. The screen cuts to black, and the credits roll.<br><br>",
    trailer: "https://www.youtube.com/embed/k10ETZ41q5o"
};

let aQuietPlace = {
    poster: "./aQuietPlace.jpeg",
    genre: "Horror",
    director: "John Krasinski",
    starring: "Emily Blunt <br> John Krasinski <br> Millicent Simmonds",
    rating: "7.5/10",
    about: "A family struggles for survival in a world where most humans have been killed by blind but noise-sensitive creatures. They are forced to communicate in sign language to keep the creatures at bay.",
    synopsis: "Day 89<br><br>" +
        "Amid the many, tattered missing persons fliers; a family quietly tiptoes barefoot through an empty store of a ghost town. The family's mother, Evelyn Abbott (Emily Blunt), carefully looks through a cluster of uncollected prescription bottles for her eldest son, Marcus (Noah Jupe), who is sick. Evelyn gives Marcus some medication and uses sign language to reassure her Deaf daughter, Regan (Millicent Simmonds), that her brother is okay. Regan then checks on her younger brother, Beau (Cade Woodward), who is drawing a picture of a rocket on the floor. He signs to Regan, \"Rocket. That's how we'll get away.\", then climbs the mostly empty shelves and reaches for a space shuttle toy. The toy falls from the shelf, but Regan scrambles to catch it before it hits the floor. Meanwhile, the family's father, Lee Abbott (John Krasinski), has scavenged some electronics for a radio which will boost its signal as well as some cutting pliers for Regan. Evelyn signs to her family that \"It'll be dark soon\" and they prepare to leave when looks of horror come across their faces. Beau has the electronic space shuttle toy in his hands which Lee carefully takes from him removing its 2 AA batteries. He signs to his youngest son, \"It's too loud.\" As the family departs, Regan sneaks the toy back to Beau who then grabs the batteries on his way out. The Abbotts silently walk back home on a trail of sand they've created. As they come to a walking bridge, they suddenly hear the electronic sound of the space shuttle toy from Beau who is pulling up the rear. A horrified Lee races back toward his son, but it's too late, an alien creature quickly seizes and kills Beau.<br><br>" +
        "Day 472<br><br>" +
        "The Abbotts are home on their family farm. Lee is in the basement of the farm house where he has set up an extensive surveillance system of cameras and monitors as well as his radio and electronics which he uses in the hope of contacting any other survivors. There are also scores of various news clippings which report of an alien invasion, as well as notes from Lee that read, \"blind\", \"attack sound\", and \"armour\". Evelyn, meanwhile, is in a cellar where she hangs a mobile she has crafted. Evelyn is pregnant. She sets up an oxygen tank which is connected to an infant breathing mask. It sits next to a covered, sound-proof baby crib. Lee has moved up to the top of his grain silo where he looks through pictures of Beau.<br><br>" +
        "Evelyn asks Regan to tell her father that dinner is ready, which she reluctantly does. After silent prayer, they eat quiet foods on leaves of lettuce instead of plates. Afterwards, Regan and Marcus play Monopoly when he accidentally knocks over a lantern which sets the rug on fire. Lee quickly puts it out, and they quietly wait for the consequences. It seems as though they've dodged a bullet but then hear a loud noise on the roof. Lee looks out the window and is startled, but relieved, to see a raccoon fall from the roof. He heads down into the basement to work on a cochlear implant processor which will help his daughter hear. Evelyn comes down where they share a smile and a set of ear buds as they slow dance to Neil Young's Harvest Moon.<br><br>" +
        "Day 473<br><br>" +
        "While Lee is pouring down more sand on their walking paths, Evelyn is in the cellar checking her blood pressure. Her due date is just a couple weeks away. She places a stethoscope to her abdomen revealing a strong, healthy heartbeat. Regan enters the house being careful to walk only on the marked parts of the floor which don't creek and wants to go down into the basement, but her dad stops her. He has added small amplifiers from a stereo to her new cochlear implant processor and wants to put them on Regan, but she stops him and signs that they never work. Lee, disheartened, hands them to her instead and starts to set out on an excursion. He wants Marcus to come with him, but the boy is scared and doesn't want to go. Instead, it's Regan who wants to go, but Lee tells her to stay and take care of her mom. She runs to her room and tries on the new cochlear implant processor. When they don't work, she's devastated. Regan packs a bag which includes her cutting pliers and a wrapped object from her dresser, then leaves the farm.<br><br>" +
        "Lee has taken his son to the river where he teaches him that making small sounds is okay as long as louder sounds are nearby. Next to a waterfall they can speak freely to each other w/out fear of being heard. Marcus asks his dad why he didn't let Regan come and if he blames her for what happened to Beau, because she blames herself. When Lee says it was no one's fault, Marcus tells him if he still loves her, he should tell her. During this conversation, Regan has arrived at the walking bridge where a makeshift memorial has been constructed for Beau. She unwraps the object from her dresser which we discover is the space shuttle toy, then uses the pliers to cut a wire which enables the toy to light up w/out making any noise. Back at home, Evelyn is carrying a laundry bag up from the basement when it gets snagged on the stairs. She manages to pull it loose causing her to fall and exposing the point of a nail sticking up from the stair.<br><br>" +
        "On the way back home, Lee and Marcus are startled by an old man coming out of the woods, and then notice the dead body of his wife on the ground nearby. Lee implores the old man to stay silent, but instead he lets out a primal scream. Lee grabs Marcus and runs as the man is quickly scooped up and killed by an alien. Back home, Evelyn's water breaks. She heads down to the basement and impales her foot on the exposed nail coming up from the stair. She manages not to scream out, but drops the picture frames she was holding which draws an alien into the house. Evelyn pulls her foot off the nail, switches on the red light-bulbs which run across the property and serve as a warning signal, and searches the shelves for a mechanical kitchen timer. The alien slowly walks down the stairs into the basement listening for any evidence of life. When the timer goes off, the alien attacks it as Evelyn runs upstairs. She sees another alien in the front yard. Evelyn goes upstairs into the bathroom and sinks into the tub. She's starting to give birth as the alien comes upstairs.<br><br>" +
        "Lee has returned home and is horrified to see that the red lights have been switched on. He signs the word \"rocket\" to his son. Then tells him, \"I need you to make a sound louder. You can do it.\" Lee grabs his shotgun as Marcus sprints to a designated area and lights a fuse which sets off a series of fireworks. Lee searches the house and walks into the bathroom where he sees an empty bathtub covered in his wife's blood. He starts to weep believing Evelyn is dead, then discovers that she is safe and hiding in the shower w/ their new baby boy. Marcus, meanwhile, is walking back toward the house when he hears an alien. He makes a run for it into the cornfield, but runs straight into a tractor wheel, knocking himself unconscious.<br><br>" +
        "Regan has returned home and notices the beam of Marcus' flashlight coming out from the cornfield, but cannot hear the alien coming up behind her. But as the alien moves closer, Regan's cochlear implant processor starts producing a high-pitched feedback which distresses the alien causing it to run off. Regan finds Marcus and they retreat to the top of the grain silo. Lee has taken Evelyn to the cellar and placed his new son into the sound-proof crib. Evelyn thinks about Beau and regrets that she didn't carry him on that fateful day, then, before getting some much needed sleep, makes Lee promise that he will protect their children. Lee leaves to look for the kids as we see water rushing down into the cellar. Later, Evelyn wakes to find that the cellar has flooded. On top of this, an alien has climbed down inside the room, and the baby is sleeping in the sound-proof crib but the top is open. Evelyn carefully picks up her baby and slinks to the back of the cellar behind the waterfall flooding the room.<br><br>" +
        "On top of the silo, Marcus signs, \"Don't worry, he'll come for us.\" but Regan shakes her head replying, \"He'll come for you.\" All of a sudden a hatch on the top of the silo breaks causing Marcus to fall inside of it. As he's slowly drowning in the grain, the alien in the cellar w/ Evelyn is drawn out by the noise. The hatch breaks away completely and falls into the silo just missing Marcus. Regan, herself, jumps into the silo and successfully saves her brother by pushing the hatch towards him so he can grab hold of it. However, she herself quickly sinks into the grain. Marcus climbs onto the hatch and pulls out his sister to safety. Regan and Marcus both sit safely atop the silo door, but then they hear a crash on top of the silo. The alien from the flooded cellar jumps in the silo as the kids cover themselves with the hatch door. They seem doomed until Regan's cochlear implant processor once again lets out a piercing feedback forcing the alien to crash out the side of the silo.<br><br>" +
        "Regan and Marcus crawl out of the silo and into a pickup truck. Lee has arrived on the scene and grabs an ax, but is quickly attacked by the alien which causes Marcus to scream. Upon hearing this, the alien heads for the truck and starts ripping it open. This time when Regan's processor starts its piercing feedback, she turns it off. Now the alien can safely resume its attack on the truck. Lee, who is badly injured, makes eye contact with his daughter and signs, \"I love you. I have always loved you.\" He then lets out a yell to sacrifice himself and save the kids. They put the truck into neutral and roll it back to the house where they reunite with their mother.<br><br>" +
        "Evelyn and the kids hear the alien approaching, so they retreat back into the house and head down to the basement. Regan, who was never allowed down there, sees (for the first time) the evidence of all the work her father put into repairing and creating her cochlear implant processor. She is overwhelmed with emotion just as the lights begin to flicker. The alien walks down into the basement and has them cornered. Regan, however, scans a handwritten scribbling from her dad which read, \"What is their weakness?\", then takes a quick glance at the hearing aids on his workbench. And Eureka! She switches on her cochlear implant processor creating feedback, and causing the alien to shudder. Regan then amplifies the feedback by holding the processor up against a microphone. The alien collapses then slowly staggers back up on its feet, but Evelyn has grabbed Lee's shotgun and blows its head to pieces. When they see on the surveillance monitors that this little brouhaha has seemingly brought every alien in the county to their home, Regan turns up the speakers while Evelyn pumps the shotgun wearing a wry grin on her face.<br><br>",
    trailer: "https://www.youtube.com/embed/WR7cc5t7tv8"
};

let movies = {
    
    'conjuring': conjuring,
    'aQuietPlace': aQuietPlace,
};

let movieName;
function goToMovie(input) {
    movieName = input;
    document.getElementById('movieList').style.display = 'none';
    document.getElementById('loginback').style.display = 'none';
    document.getElementById('aboutUs').style.display = 'none';

    document.getElementById('loggedInBack').style.display = 'none';
    document.getElementById('movieDetails').style.display = 'block';
    document.getElementById("synopsis").classList.remove("show");
    document.getElementById("synopsis").classList.add("hide");
    document.getElementById('collapsibleSynopsis').innerHTML = "Show Synopsis";

    document.getElementById("moviePoster").setAttribute("src", movies[movieName]['poster']);
    document.getElementById("genre").innerHTML = movies[movieName]['genre'];
    document.getElementById("trailerlnk").setAttribute("src", movies[movieName]['trailer']);
    document.getElementById("director").innerHTML = movies[movieName]['director'];
    document.getElementById("actor").innerHTML = movies[movieName]['starring'];
    document.getElementById("rate").innerHTML = movies[movieName]['rating'];
    document.getElementById("aboutTxt").innerHTML = movies[movieName]['about'];
    document.getElementById("synopsisTxt").innerHTML = movies[movieName]['synopsis'];
}

function goToLogin() {
    document.getElementById('movieList').style.display = 'none';
    document.getElementById('movieDetails').style.display = 'none';
    document.getElementById('aboutUs').style.display = 'none';


    if (cusers == null) {
        document.getElementById('loggedInBack').style.display = 'none';
        document.getElementById('loginback').style.display = 'block';
    }
    else {
        document.getElementById('loginback').style.display = 'none';
        document.getElementById('loggedInBack').style.display = 'block';
        document.getElementById('welcomeMessage').innerHTML = welcomeMessage;
    }
}

function goToHome() {
    document.getElementById('movieList').style.display = 'block';
    document.getElementById('loginback').style.display = 'none';
    document.getElementById('movieDetails').style.display = 'none';
    document.getElementById('loggedInBack').style.display = 'none';
    document.getElementById('aboutUs').style.display = 'none';


}

function goToAboutUs(){
    document.getElementById('movieList').style.display = 'none';
    document.getElementById('loginback').style.display = 'none';
    document.getElementById('movieDetails').style.display = 'none';
    document.getElementById('loggedInBack').style.display = 'none';
    document.getElementById('aboutUs').style.display = 'block';


}

let superUsers = { "Hemanth": "Hemanth", "Harsha": "Sonilash", "Suhas": "Badhas", "Amitesh": "Teshman" }
localStorage.setItem('superUsers', JSON.stringify(superUsers))

function createUser(USERNAME, PASSWORD) {
    localStorage.setItem(USERNAME.toString(), PASSWORD.toString());
}
createUser('Mokshith', 'Mokshith');
createUser('Abhiram', 'Abhiram');
createUser('Punav', 'Punav');
createUser('Himesh', 'Himesh');

let cusers, pcusers, welcomeMessage;

function subbut() {


    cusers = document.getElementById("username").value;
    pcusers = document.getElementById("Password").value;
    if (cusers == "" || pcusers == "") {
        alert("Please Enter All Necessary Details!");
    }
    else {
        if (localStorage.getItem(cusers) == pcusers) {
            welcomeMessage = "Welcome to MovieHASH <br><br> You are logged in as " + cusers;
            goToLogin();
        }
        else if (localStorage.getItem(cusers) != null) {
            alert("Password Incorrect!");
            document.getElementById("Password").value = "";
        }
        else {
            alert("User Not Found!");
            document.getElementById("username").value = "";
            document.getElementById("Password").value = "";
        }
    }
}




function showSynopsis() {
    if (document.getElementById("synopsis").classList.contains("show")) {
        document.getElementById("synopsis").classList.remove("show");
        document.getElementById("synopsis").classList.add("hide");
        document.getElementById('collapsibleSynopsis').innerHTML = "Show Synopsis";
    }
    else {
        document.getElementById("synopsis").classList.remove("hide")
        document.getElementById("synopsis").classList.add("show")
        document.getElementById('collapsibleSynopsis').innerHTML = "Hide Synopsis";

    }
}


function validateForm() {
    let fullName = document.getElementById("regFullName").value;
    let email = document.getElementById("regEmail").value;
    let phoneNumber = document.getElementById('regPhoneNumber').value;
    let phoneCode = document.getElementById('regPhoneCode').value;
    let dateOfBirth = document.getElementById('regDateOfBirth').value;
    let username = document.getElementById("regUsername").value;
    let password = document.getElementById("regPassword").value;
    let confirmPassword = document.getElementById("regPasswordConfirm").value;

    let alertText = "";
    if (fullName == "" || email == "" || phoneCode == "" || phoneNumber == "" || dateOfBirth == "" || username == "" || password == "" || confirmPassword == "") {
        alertText = alertText.concat("Fields Cannot Be Empty\n")
    }
    if (phoneCode != '91' || phoneNumber.length != 10) {
        alertText = alertText.concat("Enter a Valid Indian Phone Number\n");
    }
    // if (dateOfBirth.getFullYear >= 2023 || dateOfBirth.getFullYear <= 1923) {
    //     alertText =  alertText.concat("Invalid Date of Birth\n");
    // }
    if (username.length < 6) {
        alertText = alertText.concat("Username should be atleast six characters long\n");
    }
    if (password.length < 8) {
        alertText = alertText.concat("Password should be atleast eight characters long\n");
    }
    if (confirmPassword !== password) {
        alertText = alertText.concat("Passwords do not match\n");
    }

    if (alertText == "") {
        createUser(username, password);
        document.getElementById('registrationTable').classList.add('hide');
        document.getElementById('registrationTitle').innerHTML = "Successful!!<br>Click to return to Home Page";
        document.getElementById('registerButton').innerHTML = "Home";
        document.getElementById('registerButton').setAttribute('onclick', 'loadHome()');
    }
    else {
        alert(alertText);
    }

}

function loadHome() {
    window.open("./index.html", "_self");
}

function search() {
    let csearch = document.getElementById("search").value;
    let i;
    if(csearch==""){
        alert("Enter a movie!");
    }
    else if(csearch=="better#"){
        window.open("https://www.imdb.com/","_self");
    }
    else{
        let i;
        let asearch=csearch.split(" ");
        csearch="";

        for(i =0; i < asearch.length; i++){
            csearch=csearch+asearch[i];
        }

   
    
    for (i in movies){
        let j=i;
        if(j.toLowerCase()==csearch.toLowerCase()){
            goToMovie(i);
            document.getElementById("search").value="";
            return;
        }
    }

    alert("Movie not found!");
    document.getElementById("search").value="";

    
}
}